
//r.PathPrefix("/file/picture/").Handler(/handleFileServer("./files/", "/file/picture/"))
func handleFileServer1(dir, prefix string) http.HandlerFunc {
	fs := http.FileServer(http.Dir(dir))

	realHandler := http.StripPrefix(prefix, fs).ServeHTTP
	return func(w http.ResponseWriter, req *http.Request) {
		println(req.RequestURI)
		if logged, _, _ := Controler.Authenticated(req); logged {
			info, err := os.Stat(req.RequestURI)
			if err != nil {
				if os.IsNotExist(err) {
					http.NotFound(w, req)
					return
				}
			}

			// Return a 404 if the request is for a directory
			if info.IsDir() {
				http.NotFound(w, req)
				return
			}

			realHandler(w, req)
		} else {
			w.Write([]byte("Access Denied"))
			http.NotFound(w, req)
			return
		}
	}
}
